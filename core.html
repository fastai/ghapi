<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Detailed information on the GhApi API">

<title>GhApi details – ghapi</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="GhApi details – ghapi">
<meta property="og:description" content="Detailed information on the GhApi API">
<meta property="og:site_name" content="ghapi">
<meta name="twitter:title" content="GhApi details – ghapi">
<meta name="twitter:description" content="Detailed information on the GhApi API">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ghapi</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./core.html">GhApi details</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ghapi</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">GhApi details</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./actions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GitHub Actions details</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./auth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Authentication</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pagination</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./event.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The events API</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cli.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Command line interface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fullapi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Full GitHub API reference</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./build_lib.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Internal - OpenAPI Parser</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#print_summary" id="toc-print_summary" class="nav-link active" data-scroll-target="#print_summary">print_summary</a></li>
  <li><a href="#ghapi" id="toc-ghapi" class="nav-link" data-scroll-target="#ghapi">GhApi</a></li>
  <li><a href="#access-by-path" id="toc-access-by-path" class="nav-link" data-scroll-target="#access-by-path">Access by path</a></li>
  <li><a href="#ghapi.__call__" id="toc-ghapi.__call__" class="nav-link" data-scroll-target="#ghapi.__call__">GhApi.__call__</a></li>
  <li><a href="#ghapi.__getitem__" id="toc-ghapi.__getitem__" class="nav-link" data-scroll-target="#ghapi.__getitem__">GhApi.__getitem__</a></li>
  <li><a href="#media-types" id="toc-media-types" class="nav-link" data-scroll-target="#media-types">Media types</a></li>
  <li><a href="#rate-limits" id="toc-rate-limits" class="nav-link" data-scroll-target="#rate-limits">Rate limits</a></li>
  <li><a href="#operations" id="toc-operations" class="nav-link" data-scroll-target="#operations">Operations</a>
  <ul class="collapse">
  <li><a href="#operation-groups" id="toc-operation-groups" class="nav-link" data-scroll-target="#operation-groups">Operation groups</a></li>
  <li><a href="#calling-endpoints" id="toc-calling-endpoints" class="nav-link" data-scroll-target="#calling-endpoints">Calling endpoints</a></li>
  <li><a href="#convenience-functions" id="toc-convenience-functions" class="nav-link" data-scroll-target="#convenience-functions">Convenience functions</a></li>
  <li><a href="#date2gh" id="toc-date2gh" class="nav-link" data-scroll-target="#date2gh">date2gh</a></li>
  <li><a href="#gh2date" id="toc-gh2date" class="nav-link" data-scroll-target="#gh2date">gh2date</a></li>
  <li><a href="#preview-endpoints" id="toc-preview-endpoints" class="nav-link" data-scroll-target="#preview-endpoints">Preview endpoints</a></li>
  </ul></li>
  <li><a href="#convenience-methods" id="toc-convenience-methods" class="nav-link" data-scroll-target="#convenience-methods">Convenience methods</a>
  <ul class="collapse">
  <li><a href="#ghapi.create_gist" id="toc-ghapi.create_gist" class="nav-link" data-scroll-target="#ghapi.create_gist">GhApi.create_gist</a></li>
  <li><a href="#releases" id="toc-releases" class="nav-link" data-scroll-target="#releases">Releases</a></li>
  <li><a href="#ghapi.delete_release" id="toc-ghapi.delete_release" class="nav-link" data-scroll-target="#ghapi.delete_release">GhApi.delete_release</a></li>
  <li><a href="#ghapi.upload_file" id="toc-ghapi.upload_file" class="nav-link" data-scroll-target="#ghapi.upload_file">GhApi.upload_file</a></li>
  <li><a href="#ghapi.create_release" id="toc-ghapi.create_release" class="nav-link" data-scroll-target="#ghapi.create_release">GhApi.create_release</a></li>
  <li><a href="#ghapi.delete_release-1" id="toc-ghapi.delete_release-1" class="nav-link" data-scroll-target="#ghapi.delete_release-1">GhApi.delete_release</a></li>
  <li><a href="#branches-and-tags" id="toc-branches-and-tags" class="nav-link" data-scroll-target="#branches-and-tags">Branches and tags</a></li>
  <li><a href="#ghapi.list_tags" id="toc-ghapi.list_tags" class="nav-link" data-scroll-target="#ghapi.list_tags">GhApi.list_tags</a></li>
  <li><a href="#ghapi.list_branches" id="toc-ghapi.list_branches" class="nav-link" data-scroll-target="#ghapi.list_branches">GhApi.list_branches</a></li>
  <li><a href="#ghapi.create_branch_empty" id="toc-ghapi.create_branch_empty" class="nav-link" data-scroll-target="#ghapi.create_branch_empty">GhApi.create_branch_empty</a></li>
  <li><a href="#ghapi.delete_tag" id="toc-ghapi.delete_tag" class="nav-link" data-scroll-target="#ghapi.delete_tag">GhApi.delete_tag</a></li>
  <li><a href="#ghapi.delete_branch" id="toc-ghapi.delete_branch" class="nav-link" data-scroll-target="#ghapi.delete_branch">GhApi.delete_branch</a></li>
  <li><a href="#ghapi.get_branch" id="toc-ghapi.get_branch" class="nav-link" data-scroll-target="#ghapi.get_branch">GhApi.get_branch</a></li>
  <li><a href="#content-git-files" id="toc-content-git-files" class="nav-link" data-scroll-target="#content-git-files">Content (git files)</a></li>
  <li><a href="#ghapi.list_files" id="toc-ghapi.list_files" class="nav-link" data-scroll-target="#ghapi.list_files">GhApi.list_files</a></li>
  <li><a href="#ghapi.get_content" id="toc-ghapi.get_content" class="nav-link" data-scroll-target="#ghapi.get_content">GhApi.get_content</a></li>
  <li><a href="#ghapi.create_or_update_file" id="toc-ghapi.create_or_update_file" class="nav-link" data-scroll-target="#ghapi.create_or_update_file">GhApi.create_or_update_file</a></li>
  <li><a href="#ghapi.create_file" id="toc-ghapi.create_file" class="nav-link" data-scroll-target="#ghapi.create_file">GhApi.create_file</a></li>
  <li><a href="#ghapi.delete_file" id="toc-ghapi.delete_file" class="nav-link" data-scroll-target="#ghapi.delete_file">GhApi.delete_file</a></li>
  <li><a href="#ghapi.update_contents" id="toc-ghapi.update_contents" class="nav-link" data-scroll-target="#ghapi.update_contents">GhApi.update_contents</a></li>
  <li><a href="#github-pages" id="toc-github-pages" class="nav-link" data-scroll-target="#github-pages">GitHub Pages</a></li>
  <li><a href="#ghapi.enable_pages" id="toc-ghapi.enable_pages" class="nav-link" data-scroll-target="#ghapi.enable_pages">GhApi.enable_pages</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/fastai/ghapi/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="core.html.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">GhApi details</h1>
</div>

<div>
  <div class="description">
    Detailed information on the GhApi API
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>You can set an environment variable named <code>GH_HOST</code> to override the default of <code>https://api.github.com</code> incase you are running <a href="https://github.com/enterprise">GitHub Enterprise</a>(GHE). However, this library has not been tested on GHE, so proceed at your own risk.</p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L100" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="print_summary" class="level3">
<h3 class="anchored" data-anchor-id="print_summary">print_summary</h3>
<blockquote class="blockquote">
<pre><code> print_summary (req:urllib.request.Request)</code></pre>
</blockquote>
<p><em>Print <code>Request.summary</code> with the token (if any) removed</em></p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L105" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi" class="level3">
<h3 class="anchored" data-anchor-id="ghapi">GhApi</h3>
<blockquote class="blockquote">
<pre><code> GhApi (owner=None, repo=None, token=None, jwt_token=None, debug=None,
        limit_cb=None, gh_host=None, authenticate=True, **kwargs)</code></pre>
</blockquote>
<p><em>Initialize self. See help(type(self)) for accurate signature.</em></p>
</section>
<section id="access-by-path" class="level3">
<h3 class="anchored" data-anchor-id="access-by-path">Access by path</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L123" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.__call__" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.__call__">GhApi.__call__</h3>
<blockquote class="blockquote">
<pre><code> GhApi.__call__ (path:str, verb:str=None, headers:dict=None,
                 route:dict=None, query:dict=None, data=None,
                 timeout=None, decode=True)</code></pre>
</blockquote>
<p><em>Call a fully specified <code>path</code> using HTTP <code>verb</code>, passing arguments to <code>fastcore.core.urlsend</code></em></p>
<div id="cell-7" class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> GhApi()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can call a <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> object as a function, passing in the path to the endpoint, the HTTP verb, and any route, query parameter, or post data parameters as required.</p>
<div id="cell-9" class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>api(<span class="st">'/repos/</span><span class="sc">{owner}</span><span class="st">/</span><span class="sc">{repo}</span><span class="st">/git/ref/</span><span class="sc">{ref}</span><span class="st">'</span>, <span class="st">'GET'</span>, route<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    owner<span class="op">=</span><span class="st">'fastai'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, ref<span class="op">=</span><span class="st">'heads/master'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="sourceCode" id="cb6"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span> <span class="er">'node_id'</span><span class="fu">:</span> <span class="er">'MDM6UmVmMzE1NzEyNTg4OnJlZnMvaGVhZHMvbWFzdGVy'</span><span class="fu">,</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">'object'</span><span class="fu">:</span> <span class="fu">{</span> <span class="er">'sha'</span><span class="fu">:</span> <span class="er">'</span><span class="dv">17</span><span class="er">efbb7eb346f0f9161c227af9c8db93597321e2'</span><span class="fu">,</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>              <span class="er">'type'</span><span class="fu">:</span> <span class="er">'commit'</span><span class="fu">,</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>              <span class="er">'url'</span><span class="fu">:</span> <span class="er">'https://api.github.com/repos/fastai/ghapi-test/git/commits/</span><span class="dv">17</span><span class="er">efbb7eb346f0f9161c227af9c8db93597321e2'</span><span class="fu">},</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">'ref'</span><span class="fu">:</span> <span class="er">'refs/heads/master'</span><span class="fu">,</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">'url'</span><span class="fu">:</span> <span class="er">'https://api.github.com/repos/fastai/ghapi-test/git/refs/heads/master'</span><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L147" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.__getitem__" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.__getitem__">GhApi.__getitem__</h3>
<blockquote class="blockquote">
<pre><code> GhApi.__getitem__ (k)</code></pre>
</blockquote>
<p><em>Lookup and call an endpoint by path and verb (which defaults to ‘GET’)</em></p>
<p>You can access endpoints by indexing into the object. When using the API this way, you do not need to specify what type of parameter (route, query, or post data) is being used. This is, therefore, the same call as above:</p>
<div id="cell-12" class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>api[<span class="st">'/repos/</span><span class="sc">{owner}</span><span class="st">/</span><span class="sc">{repo}</span><span class="st">/git/ref/</span><span class="sc">{ref}</span><span class="st">'</span>](owner<span class="op">=</span><span class="st">'fastai'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, ref<span class="op">=</span><span class="st">'heads/master'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="sourceCode" id="cb9"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span> <span class="er">'node_id'</span><span class="fu">:</span> <span class="er">'MDM6UmVmMzE1NzEyNTg4OnJlZnMvaGVhZHMvbWFzdGVy'</span><span class="fu">,</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">'object'</span><span class="fu">:</span> <span class="fu">{</span> <span class="er">'sha'</span><span class="fu">:</span> <span class="er">'</span><span class="dv">17</span><span class="er">efbb7eb346f0f9161c227af9c8db93597321e2'</span><span class="fu">,</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>              <span class="er">'type'</span><span class="fu">:</span> <span class="er">'commit'</span><span class="fu">,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>              <span class="er">'url'</span><span class="fu">:</span> <span class="er">'https://api.github.com/repos/fastai/ghapi-test/git/commits/</span><span class="dv">17</span><span class="er">efbb7eb346f0f9161c227af9c8db93597321e2'</span><span class="fu">},</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">'ref'</span><span class="fu">:</span> <span class="er">'refs/heads/master'</span><span class="fu">,</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">'url'</span><span class="fu">:</span> <span class="er">'https://api.github.com/repos/fastai/ghapi-test/git/refs/heads/master'</span><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="media-types" class="level3">
<h3 class="anchored" data-anchor-id="media-types">Media types</h3>
<p>For some endpoints GitHub lets you specify a <a href="https://docs.github.com/en/rest/overview/media-types">media type</a> the for response data, using the <code>Accept</code> header. If you choose a media type that is not JSON formatted (for instance <code>application/vnd.github.v3.sha</code>) then the call to the <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> object will return a string instead of an object.</p>
<div id="cell-15" class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>api(<span class="st">'/repos/</span><span class="sc">{owner}</span><span class="st">/</span><span class="sc">{repo}</span><span class="st">/commits/</span><span class="sc">{ref}</span><span class="st">'</span>, <span class="st">'GET'</span>, route<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    owner<span class="op">=</span><span class="st">'fastai'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, ref<span class="op">=</span><span class="st">'refs/heads/master'</span>),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    headers<span class="op">=</span>{<span class="st">'Accept'</span>: <span class="st">'application/vnd.github.VERSION.sha'</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>'17efbb7eb346f0f9161c227af9c8db93597321e2'</code></pre>
</div>
</div>
</section>
<section id="rate-limits" class="level3">
<h3 class="anchored" data-anchor-id="rate-limits">Rate limits</h3>
<p>GitHub has various <a href="https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting">rate limits</a> for their API. After each call, the response includes information about how many requests are remaining in the hourly quota. If you’d like to add alerts, or indications showing current quota usage, you can register a callback with <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> by passing a callable to the <code>limit_cb</code> parameter. This callback will be called whenever the amount of quota used changes. It will be called with two arguments: the new quota remaining, and the total hourly quota.</p>
<div id="cell-18" class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _f(rem,quota): <span class="bu">print</span>(<span class="ss">f"Quota remaining: </span><span class="sc">{</span>rem<span class="sc">}</span><span class="ss"> of </span><span class="sc">{</span>quota<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> GhApi(limit_cb<span class="op">=</span>_f)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>api[<span class="st">'/repos/</span><span class="sc">{owner}</span><span class="st">/</span><span class="sc">{repo}</span><span class="st">/git/ref/</span><span class="sc">{ref}</span><span class="st">'</span>](owner<span class="op">=</span><span class="st">'fastai'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, ref<span class="op">=</span><span class="st">'heads/master'</span>).ref</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Quota remaining: 4897 of 5000</code></pre>
</div>
<div class="cell-output cell-output-display">
<pre><code>'refs/heads/master'</code></pre>
</div>
</div>
<p>You can always get the remaining quota from the <code>limit_rem</code> attribute:</p>
<div id="cell-20" class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>api.limit_rem</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>'4897'</code></pre>
</div>
</div>
</section>
<section id="operations" class="level2">
<h2 class="anchored" data-anchor-id="operations">Operations</h2>
<p>Instead of passing a path to <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a>, you will more often use the operation methods provided in the API’s operation groups, which include documentation, signatures, and auto-complete.</p>
<p>If you provide <code>owner</code> and/or <code>repo</code> to the constructor, they will be automatically inserted into any calls which use them (except when calling <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> as a function). You can also pass any other arbitrary keyword arguments you like to have them used as defaults for any relevant calls.</p>
<p>You must include a GitHub API token if you need to access any authenticated endpoints. If don’t pass the <code>token</code> param, then your <code>GITHUB_TOKEN</code> environment variable will be used, if available.</p>
<div id="cell-23" class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>api <span class="op">=</span> GhApi(owner<span class="op">=</span><span class="st">'fastai'</span>, repo<span class="op">=</span><span class="st">'ghapi-test'</span>, token<span class="op">=</span>token)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="operation-groups" class="level3">
<h3 class="anchored" data-anchor-id="operation-groups">Operation groups</h3>
<p>The following groups of endpoints are provided, which you can list at any time along with a link to documentation for all endpoints in that group, by displaying the <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> object:</p>
<div id="cell-26" class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>api</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<ul>
<li><a href="https://docs.github.com/rest/reference/actions">actions</a></li>
<li><a href="https://docs.github.com/rest/reference/activity">activity</a></li>
<li><a href="https://docs.github.com/rest/reference/apps">apps</a></li>
<li><a href="https://docs.github.com/rest/reference/billing">billing</a></li>
<li><a href="https://docs.github.com/rest/reference/checks">checks</a></li>
<li><a href="https://docs.github.com/rest/reference/classroom">classroom</a></li>
<li><a href="https://docs.github.com/rest/reference/code-scanning">code_scanning</a></li>
<li><a href="https://docs.github.com/rest/reference/code-security">code_security</a></li>
<li><a href="https://docs.github.com/rest/reference/codes-of-conduct">codes_of_conduct</a></li>
<li><a href="https://docs.github.com/rest/reference/codespaces">codespaces</a></li>
<li><a href="https://docs.github.com/rest/reference/copilot">copilot</a></li>
<li><a href="https://docs.github.com/rest/reference/dependabot">dependabot</a></li>
<li><a href="https://docs.github.com/rest/reference/dependency-graph">dependency_graph</a></li>
<li><a href="https://docs.github.com/rest/reference/emojis">emojis</a></li>
<li><a href="https://docs.github.com/rest/reference/gists">gists</a></li>
<li><a href="https://docs.github.com/rest/reference/git">git</a></li>
<li><a href="https://docs.github.com/rest/reference/gitignore">gitignore</a></li>
<li><a href="https://docs.github.com/rest/reference/interactions">interactions</a></li>
<li><a href="https://docs.github.com/rest/reference/issues">issues</a></li>
<li><a href="https://docs.github.com/rest/reference/licenses">licenses</a></li>
<li><a href="https://docs.github.com/rest/reference/markdown">markdown</a></li>
<li><a href="https://docs.github.com/rest/reference/meta">meta</a></li>
<li><a href="https://docs.github.com/rest/reference/migrations">migrations</a></li>
<li><a href="https://docs.github.com/rest/reference/oidc">oidc</a></li>
<li><a href="https://docs.github.com/rest/reference/orgs">orgs</a></li>
<li><a href="https://docs.github.com/rest/reference/packages">packages</a></li>
<li><a href="https://docs.github.com/rest/reference/projects">projects</a></li>
<li><a href="https://docs.github.com/rest/reference/pulls">pulls</a></li>
<li><a href="https://docs.github.com/rest/reference/rate-limit">rate_limit</a></li>
<li><a href="https://docs.github.com/rest/reference/reactions">reactions</a></li>
<li><a href="https://docs.github.com/rest/reference/repos">repos</a></li>
<li><a href="https://docs.github.com/rest/reference/search">search</a></li>
<li><a href="https://docs.github.com/rest/reference/secret-scanning">secret_scanning</a></li>
<li><a href="https://docs.github.com/rest/reference/security-advisories">security_advisories</a></li>
<li><a href="https://docs.github.com/rest/reference/teams">teams</a></li>
<li><a href="https://docs.github.com/rest/reference/users">users</a></li>
</ul>
</div>
</div>
<div id="cell-27" class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>api.codes_of_conduct</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<ul>
<li><a href="https://docs.github.com/rest/codes-of-conduct/codes-of-conduct#get-all-codes-of-conduct">codes-of-conduct.get_all_codes_of_conduct</a>(): <em>Get all codes of conduct</em></li>
<li><a href="https://docs.github.com/rest/codes-of-conduct/codes-of-conduct#get-a-code-of-conduct">codes-of-conduct.get_conduct_code</a>(key): <em>Get a code of conduct</em></li>
</ul>
</div>
</div>
</section>
<section id="calling-endpoints" class="level3">
<h3 class="anchored" data-anchor-id="calling-endpoints">Calling endpoints</h3>
<p>The GitHub API’s endpoint names generally start with a verb like “get”, “list”, “delete”, “create”, etc, followed <code>_</code>, then by a noun such as “ref”, “webhook”, “issue”, etc.</p>
<p>Each endpoint has a different signature, which you can see by using <kbd>Shift</kbd>-<kbd>Tab</kbd> in Jupyter, or by just printing the endpoint object (which also shows a link to the GitHub docs):</p>
<div id="cell-30" class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(api.repos.create_webhook)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>repos.create_webhook(name: str = None, config: dict = None, events: list = ['push'], active: bool = True)
https://docs.github.com/rest/repos/webhooks#create-a-repository-webhook</code></pre>
</div>
</div>
<p>Displaying an endpoint object in Jupyter also provides a formatted summary and link to the official GitHub documentation:</p>
<div id="cell-32" class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>api.repos.create_webhook</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><a href="https://docs.github.com/rest/repos/webhooks#create-a-repository-webhook">repos.create_webhook</a>(name, config, events, active): <em>Create a repository webhook</em></p>
</div>
</div>
<p>Endpoint objects are called using standard Python method syntax:</p>
<div id="cell-34" class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>ref <span class="op">=</span> api.git.get_ref(<span class="st">'heads/master'</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>test_eq(ref.<span class="bu">object</span>.<span class="bu">type</span>, <span class="st">'commit'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Information about the endpoint are available as attributes:</p>
<div id="cell-36" class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>api.git.get_ref.path,api.git.get_ref.verb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>('/repos/fastai/ghapi-test/git/ref/{ref}', 'get')</code></pre>
</div>
</div>
<p>You can get a list of all endpoints available in a group, along with a link to documentation for each, by viewing the group:</p>
<div id="cell-38" class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>api.git</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<ul>
<li><a href="https://docs.github.com/rest/git/blobs#create-a-blob">git.create_blob</a>(content, encoding): <em>Create a blob</em></li>
<li><a href="https://docs.github.com/rest/git/blobs#get-a-blob">git.get_blob</a>(file_sha): <em>Get a blob</em></li>
<li><a href="https://docs.github.com/rest/git/commits#create-a-commit">git.create_commit</a>(message, tree, parents, author, committer, signature): <em>Create a commit</em></li>
<li><a href="https://docs.github.com/rest/git/commits#get-a-commit-object">git.get_commit</a>(commit_sha): <em>Get a commit object</em></li>
<li><a href="https://docs.github.com/rest/git/refs#list-matching-references">git.list_matching_refs</a>(ref): <em>List matching references</em></li>
<li><a href="https://docs.github.com/rest/git/refs#get-a-reference">git.get_ref</a>(ref): <em>Get a reference</em></li>
<li><a href="https://docs.github.com/rest/git/refs#create-a-reference">git.create_ref</a>(ref, sha): <em>Create a reference</em></li>
<li><a href="https://docs.github.com/rest/git/refs#update-a-reference">git.update_ref</a>(ref, sha, force): <em>Update a reference</em></li>
<li><a href="https://docs.github.com/rest/git/refs#delete-a-reference">git.delete_ref</a>(ref): <em>Delete a reference</em></li>
<li><a href="https://docs.github.com/rest/git/tags#create-a-tag-object">git.create_tag</a>(tag, message, object, type, tagger): <em>Create a tag object</em></li>
<li><a href="https://docs.github.com/rest/git/tags#get-a-tag">git.get_tag</a>(tag_sha): <em>Get a tag</em></li>
<li><a href="https://docs.github.com/rest/git/trees#create-a-tree">git.create_tree</a>(tree, base_tree): <em>Create a tree</em></li>
<li><a href="https://docs.github.com/rest/git/trees#get-a-tree">git.get_tree</a>(tree_sha, recursive): <em>Get a tree</em></li>
</ul>
</div>
</div>
<p>For “list” endpoints, the noun will be a plural form, e.g.:</p>
<div id="cell-40" class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>hooks <span class="op">=</span> api.repos.list_webhooks()</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(hooks), <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can pass dicts, lists, etc. directly, where they are required for GitHub API endpoints:</p>
<div id="cell-42" class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://example.com'</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>cfg <span class="op">=</span> <span class="bu">dict</span>(url<span class="op">=</span>url, content_type<span class="op">=</span><span class="st">'json'</span>, secret<span class="op">=</span><span class="st">'XXX'</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>hook <span class="op">=</span> api.repos.create_webhook(config<span class="op">=</span>cfg, events<span class="op">=</span>[<span class="st">'ping'</span>])</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>test_eq(hook.config.url, url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s confirm that our new webhook has been created:</p>
<div id="cell-44" class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>hooks <span class="op">=</span> api.repos.list_webhooks()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(hooks), <span class="dv">1</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>test_eq(hooks[<span class="dv">0</span>].events, [<span class="st">'ping'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, we can delete our new webhook:</p>
<div id="cell-46" class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>api.repos.delete_webhook(hooks[<span class="dv">0</span>].<span class="bu">id</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="sourceCode" id="cb31"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="convenience-functions" class="level3">
<h3 class="anchored" data-anchor-id="convenience-functions">Convenience functions</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L156" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="date2gh" class="level3">
<h3 class="anchored" data-anchor-id="date2gh">date2gh</h3>
<blockquote class="blockquote">
<pre><code> date2gh (dt:datetime.datetime)</code></pre>
</blockquote>
<p><em>Convert <code>dt</code> (which is assumed to be in UTC time zone) to a format suitable for GitHub API operations</em></p>
<p>The GitHub API assumes that dates will be in a specific string format. <a href="https://ghapi.fast.ai/core.html#date2gh"><code>date2gh</code></a> converts Python standard <code>datetime</code> objects to that format. For instance, to find issues opened in the ‘fastcore’ repo in the last 4 weeks:</p>
<div id="cell-50" class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> date2gh(datetime.utcnow() <span class="op">-</span> timedelta(weeks<span class="op">=</span><span class="dv">4</span>))</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>issues <span class="op">=</span> GhApi(<span class="st">'fastai'</span>).issues.list_for_repo(repo<span class="op">=</span><span class="st">'fastcore'</span>, since<span class="op">=</span>dt)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(issues)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>3</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L161" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="gh2date" class="level3">
<h3 class="anchored" data-anchor-id="gh2date">gh2date</h3>
<blockquote class="blockquote">
<pre><code> gh2date (dtstr:str)</code></pre>
</blockquote>
<p><em>Convert date string <code>dtstr</code> received from a GitHub API operation to a UTC <code>datetime</code></em></p>
<div id="cell-52" class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>created <span class="op">=</span> issues[<span class="dv">0</span>].created_at</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(created, <span class="st">'-&gt;'</span>, gh2date(created))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2024-08-27T06:49:29Z -&gt; 2024-08-27 06:49:29</code></pre>
</div>
</div>
<p>You can set the <code>debug</code> attribute to any callable to intercept all requests, for instance to print <code>Request.summary</code>. <a href="https://ghapi.fast.ai/core.html#print_summary"><code>print_summary</code></a> is provided for this purpose. Using this, we can see the preview header that is added for preview functionality, e.g.</p>
<div id="cell-54" class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>api.debug<span class="op">=</span>print_summary</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>api.codes_of_conduct.get_all_codes_of_conduct()[<span class="dv">0</span>]</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>api.debug<span class="op">=</span><span class="va">None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'data': None,
 'full_url': 'https://api.github.com/codes_of_conduct',
 'headers': {'Accept': 'application/vnd.github.v3+json'},
 'method': 'GET'}</code></pre>
</div>
</div>
</section>
<section id="preview-endpoints" class="level3">
<h3 class="anchored" data-anchor-id="preview-endpoints">Preview endpoints</h3>
<p>GitHub’s preview API functionality requires a special header to be passed to enable it. This is added automatically for you.</p>
</section>
</section>
<section id="convenience-methods" class="level2">
<h2 class="anchored" data-anchor-id="convenience-methods">Convenience methods</h2>
<p>Some methods in the GitHub API are a bit clunky or unintuitive. In these situations we add convenience methods to <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> to make things simpler. There are also some multi-step processes in the GitHub API that <a href="https://ghapi.fast.ai/core.html#ghapi"><code>GhApi</code></a> provide convenient wrappers for. The methods currently available are shown below; do not hesitate to <a href="https://github.com/fastai/ghapi-test/issues">create an issue</a> or pull request if there are other processes that you’d like to see supported better.</p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L167" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="ghapi.create_gist" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.create_gist">GhApi.create_gist</h3>
<blockquote class="blockquote">
<pre><code> GhApi.create_gist (description, content, filename='gist.txt',
                    public=False)</code></pre>
</blockquote>
<p><em>Create a gist containing a single file</em></p>
<div id="cell-60" class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>gist <span class="op">=</span> api.create_gist(<span class="st">"some description"</span>, <span class="st">"some content"</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>gist.html_url, gist.files[<span class="st">'gist.txt'</span>].content</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>('https://gist.github.com/jph00/d11f49a2c4515491f09d520e402ede75',
 'some content')</code></pre>
</div>
</div>
<div id="cell-61" class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>api.gists.delete(gist.<span class="bu">id</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="sourceCode" id="cb44"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Note that if you want to create a gist with multiple files, call the GitHub API directly, e.g.:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>api.gists.create(<span class="st">"some description"</span>, files<span class="op">=</span>{<span class="st">"f1.txt"</span>: {<span class="st">"content"</span>: <span class="st">"my content"</span>}, ...})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="releases" class="level3">
<h3 class="anchored" data-anchor-id="releases">Releases</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L173" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.delete_release" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.delete_release">GhApi.delete_release</h3>
<blockquote class="blockquote">
<pre><code> GhApi.delete_release (release)</code></pre>
</blockquote>
<p><em>Delete a release and its associated tag</em></p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L180" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.upload_file" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.upload_file">GhApi.upload_file</h3>
<blockquote class="blockquote">
<pre><code> GhApi.upload_file (rel, fn)</code></pre>
</blockquote>
<p><em>Upload <code>fn</code> to endpoint for release <code>rel</code></em></p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L189" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.create_release" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.create_release">GhApi.create_release</h3>
<blockquote class="blockquote">
<pre><code> GhApi.create_release (tag_name, branch='master', name=None, body='',
                       draft=False, prerelease=False, files=None)</code></pre>
</blockquote>
<p><em>Wrapper for <code>GhApi.repos.create_release</code> which also uploads <code>files</code></em></p>
<p>Creating a release and attaching files to it is normally a multi-stage process, so <code>create_release</code> wraps this up for you. It takes the same arguments as <a href="https://docs.github.com/rest/reference/repos#create-a-release"><code>repos.create_release</code></a>, along with <code>files</code>, which can contain a single file name, or a list of file names to upload to your release:</p>
<div id="cell-68" class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>rel <span class="op">=</span> api.create_release(<span class="st">'0.0.1'</span>, files<span class="op">=</span>[<span class="st">'README.md'</span>])</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>test_eq(rel.name, <span class="st">'v0.0.1'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-69" class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>sleep(<span class="fl">0.2</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>rels <span class="op">=</span> api.repos.list_releases()</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(rels), <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can check that our file has been uploaded; GitHub refers to them as “assets”:</p>
<div id="cell-71" class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>assets <span class="op">=</span> api.repos.list_release_assets(rels[<span class="dv">0</span>].<span class="bu">id</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>test_eq(assets[<span class="dv">0</span>].name, <span class="st">'README.md'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L173" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.delete_release-1" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.delete_release-1">GhApi.delete_release</h3>
<blockquote class="blockquote">
<pre><code> GhApi.delete_release (release)</code></pre>
</blockquote>
<p><em>Delete a release and its associated tag</em></p>
</section>
<section id="branches-and-tags" class="level3">
<h3 class="anchored" data-anchor-id="branches-and-tags">Branches and tags</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L200" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.list_tags" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.list_tags">GhApi.list_tags</h3>
<blockquote class="blockquote">
<pre><code> GhApi.list_tags (prefix:str='')</code></pre>
</blockquote>
<p><em>List all tags, optionally filtered to those starting with <code>prefix</code></em></p>
<p>With no <code>prefix</code>, all tags are listed.</p>
<div id="cell-76" class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.list_tags()), <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using the full tag name will return just that tag.</p>
<div id="cell-78" class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.list_tags(rel.tag_name)), <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L206" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.list_branches" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.list_branches">GhApi.list_branches</h3>
<blockquote class="blockquote">
<pre><code> GhApi.list_branches (prefix:str='')</code></pre>
</blockquote>
<p><em>List all branches, optionally filtered to those starting with <code>prefix</code></em></p>
<p>Branches can be listed in the exactly the same way as tags.</p>
<div id="cell-81" class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.list_branches(<span class="st">'master'</span>)), <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can delete our release and confirm that it is removed:</p>
<div id="cell-83" class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>api.delete_release(rels[<span class="dv">0</span>])</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.repos.list_releases()), <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-84" class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #|hide</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co"># #not working</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co"># #|export</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># @patch</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co"># def create_branch_empty(self:GhApi, branch):</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co">#     c = self.git.create_commit(f'create {branch}', EMPTY_TREE_SHA)</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co">#     return self.git.create_ref(f'refs/heads/{branch}', c.sha)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L216" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.create_branch_empty" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.create_branch_empty">GhApi.create_branch_empty</h3>
<blockquote class="blockquote">
<pre><code> GhApi.create_branch_empty (branch)</code></pre>
</blockquote>
<div id="cell-86" class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>ref <span class="op">=</span> api.create_branch_empty(<span class="st">"testme"</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.list_branches(<span class="st">'testme'</span>)), <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L224" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.delete_tag" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.delete_tag">GhApi.delete_tag</h3>
<blockquote class="blockquote">
<pre><code> GhApi.delete_tag (tag:str)</code></pre>
</blockquote>
<p><em>Delete a tag</em></p>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L230" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.delete_branch" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.delete_branch">GhApi.delete_branch</h3>
<blockquote class="blockquote">
<pre><code> GhApi.delete_branch (branch:str)</code></pre>
</blockquote>
<p><em>Delete a branch</em></p>
<div id="cell-89" class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>api.delete_branch(<span class="st">'testme'</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="bu">len</span>(api.list_branches(<span class="st">'testme'</span>)), <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L236" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.get_branch" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.get_branch">GhApi.get_branch</h3>
<blockquote class="blockquote">
<pre><code> GhApi.get_branch (branch=None)</code></pre>
</blockquote>
</section>
<section id="content-git-files" class="level3">
<h3 class="anchored" data-anchor-id="content-git-files">Content (git files)</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L242" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.list_files" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.list_files">GhApi.list_files</h3>
<blockquote class="blockquote">
<pre><code> GhApi.list_files (branch=None)</code></pre>
</blockquote>
<div id="cell-93" class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>files <span class="op">=</span> api.list_files()</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>files[<span class="st">'README.md'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="sourceCode" id="cb68"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span> <span class="er">'mode'</span><span class="fu">:</span> <span class="er">'</span><span class="dv">100644</span><span class="er">'</span><span class="fu">,</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">'path'</span><span class="fu">:</span> <span class="er">'README.md'</span><span class="fu">,</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">'sha'</span><span class="fu">:</span> <span class="er">'eaea0f2698e76c75602058bf4e2e9fd7940ac4e3'</span><span class="fu">,</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">'size'</span><span class="fu">:</span> <span class="dv">72</span><span class="fu">,</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">'type'</span><span class="fu">:</span> <span class="er">'blob'</span><span class="fu">,</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">'url'</span><span class="fu">:</span> <span class="er">'https://api.github.com/repos/fastai/ghapi-test/git/blobs/eaea0f2698e76c75602058bf4e2e9fd7940ac4e3'</span><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L249" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.get_content" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.get_content">GhApi.get_content</h3>
<blockquote class="blockquote">
<pre><code> GhApi.get_content (path)</code></pre>
</blockquote>
<div id="cell-95" class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>readme <span class="op">=</span> api.get_content(<span class="st">'README.md'</span>).decode()</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="st">'ghapi'</span> <span class="kw">in</span> readme</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L255" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.create_or_update_file" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.create_or_update_file">GhApi.create_or_update_file</h3>
<blockquote class="blockquote">
<pre><code> GhApi.create_or_update_file (path, message, committer, author,
                              content=None, sha=None, branch='')</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L265" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.create_file" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.create_file">GhApi.create_file</h3>
<blockquote class="blockquote">
<pre><code> GhApi.create_file (path, message, committer, author, content=None,
                    branch=None)</code></pre>
</blockquote>
<div id="cell-98" class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>person <span class="op">=</span> <span class="bu">dict</span>(name<span class="op">=</span><span class="st">"Monalisa Octocat"</span>, email<span class="op">=</span><span class="st">"octocat@github.com"</span>)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> api.create_file(</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    path<span class="op">=</span><span class="st">'foo'</span>,</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    message<span class="op">=</span><span class="st">"Create foo"</span>,</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    content<span class="op">=</span><span class="st">"foobar"</span>,</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>    committer<span class="op">=</span>person, author<span class="op">=</span>person</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="st">'foobar'</span>, api.get_content(<span class="st">'foo'</span>).decode())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L271" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.delete_file" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.delete_file">GhApi.delete_file</h3>
<blockquote class="blockquote">
<pre><code> GhApi.delete_file (path, message, committer, author, sha=None,
                    branch=None)</code></pre>
</blockquote>
<div id="cell-100" class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>api.delete_file(<span class="st">'foo'</span>, <span class="st">'delete foo'</span>, committer<span class="op">=</span>person, author<span class="op">=</span>person)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="st">'foo'</span> <span class="kw">not</span> <span class="kw">in</span> api.list_files()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L279" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.update_contents" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.update_contents">GhApi.update_contents</h3>
<blockquote class="blockquote">
<pre><code> GhApi.update_contents (path, message, committer, author, content,
                        sha=None, branch=None)</code></pre>
</blockquote>
<div id="cell-102" class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> api.update_contents(</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>    path<span class="op">=</span><span class="st">'README.md'</span>,</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    message<span class="op">=</span><span class="st">"Update README"</span>,</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    committer<span class="op">=</span>person, author<span class="op">=</span>person,</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    content<span class="op">=</span>readme<span class="op">+</span><span class="st">"foobar"</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>res.content.size</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>78</code></pre>
</div>
</div>
<div id="cell-103" class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>readme <span class="op">=</span> api.get_content(<span class="st">'README.md'</span>).decode()</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="st">'foobar'</span> <span class="kw">in</span> readme</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>api.update_contents(<span class="st">'README.md'</span>, <span class="st">"Revert README"</span>, committer<span class="op">=</span>person, author<span class="op">=</span>person, content<span class="op">=</span>readme[:<span class="op">-</span><span class="dv">6</span>])<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="github-pages" class="level3">
<h3 class="anchored" data-anchor-id="github-pages">GitHub Pages</h3>
<hr>
<p><a href="https://github.com/fastai/ghapi/blob/master/ghapi/core.py#L286" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ghapi.enable_pages" class="level3">
<h3 class="anchored" data-anchor-id="ghapi.enable_pages">GhApi.enable_pages</h3>
<blockquote class="blockquote">
<pre><code> GhApi.enable_pages (branch=None, path='/')</code></pre>
</blockquote>
<p><em>Enable or update pages for a repo to point to a <code>branch</code> and <code>path</code>.</em></p>
<p><code>branch</code> is set to the default branch if <code>None</code>. <code>path</code> must be <code>/docs</code> or <code>/</code>.</p>
<div id="cell-107" class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> api.enable_pages(branch<span class="op">=</span><span class="st">'new-branch'</span>, path<span class="op">=</span><span class="st">'/'</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>test_eq(res.source.branch, <span class="st">'new-branch'</span>)</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>test_eq(res.source.path, <span class="st">'/'</span>)</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>api.repos.delete_pages_site()</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>api.delete_branch(<span class="st">'new-branch'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/ghapi\.fast\.ai\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/fastai/ghapi/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>